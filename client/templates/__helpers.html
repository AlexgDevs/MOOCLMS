{% macro form_generate(form, action='', user_id=None, course_type=None, course_id=None, module_id=None) %}
<form action="{{ action }}" method="post" enctype="multipart/form-data">
    {{ form.hidden_tag() }}
    {% if user_id %}
        <input type="hidden" name="user_id" value="{{ user_id }}">
    {% endif %}
    {% if course_type %}
        <input type="hidden" name="course_type" value="{{ course_type }}">
    {% endif %}
    {% if course_id %}
        <input type="hidden" name="course_id" value="{{ course_id }}">
    {% endif %}
    {% if module_id %}
        <input type="hidden" name="module_id" value="{{ module_id }}">
    {% endif %}
    {% for field in form if field.widget.input_type != 'hidden' %}
        {% if field.widget.input_type != "submit" %}
        <div class="field">
            {{ field.label }} {{ field }}
        </div> 
        {% else %}
        <div class="field">
            {{ field }}
        </div> 
        {% endif %}
        {% if field.errors %}
            {% for error in field.errors %}
                <div class="field_error">
                    <strong>{{ error }}</strong>
                </div>
            {% endfor %}
        {% endif %}
    {% endfor %}
</form>
{% endmacro %}
